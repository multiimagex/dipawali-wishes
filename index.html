<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‚ú® ‡§∂‡•Å‡§≠ ‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä ‚ú®</title>
<style>
  :root{
    --saffron1:#ff9933;
    --saffron2:#ffcc33;
    --yellow:#fff176;
    --accent:#ff6a00;
    --card-bg: rgba(255,255,255,0.06);
    --text-dark: #3a1e00;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    font-family: "Poppins", system-ui, sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    background: linear-gradient(135deg,var(--saffron1), var(--saffron2) 45%, var(--yellow) 100%);
    color:var(--text-dark);
    overflow:hidden;
  }

  /* Canvas sits behind everything and is fully transparent except for sparks */
  canvas#c{
    position:fixed;
    inset:0;
    z-index:0;
    display:block;
    pointer-events:none;
  }

  /* central card (centered and large, like preview) */
  .card{
    width:min(900px,94vw);
    max-width:900px;
    border-radius:18px;
    padding:26px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    box-shadow: 0 12px 40px rgba(0,0,0,0.16), 0 0 60px rgba(255,200,0,0.12);
    position:relative;
    z-index:2;
    backdrop-filter: blur(6px);
    display:flex;
    gap:22px;
    align-items:center;
    justify-content:center;
  }

  /* left: big image; right: controls (or vice versa on small screens) */
  .left{
    flex:0 0 300px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .right{
    flex:1 1 420px;
    padding:6px 8px;
  }

  img.laxmi{
    width:280px;
    max-width:80%;
    border-radius:16px;
    box-shadow: 0 14px 50px rgba(0,0,0,0.25), 0 0 26px rgba(255,200,0,0.18);
    animation: float 3.2s ease-in-out infinite;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  }
  @keyframes float {
    0%{transform:translateY(0)}
    50%{transform:translateY(-10px)}
    100%{transform:translateY(0)}
  }

  h1.big{
    margin:0 0 6px;
    font-size: clamp(30px, 5vw, 56px);
    color:#fff;
    text-shadow: 0 6px 24px rgba(255,200,0,0.95), 0 0 40px rgba(255,140,0,0.65);
  }
  p.lead {
    margin:6px 0 14px;
    color:rgba(255,255,255,0.95);
    font-size:1.05rem;
    text-shadow: 0 1px 8px rgba(0,0,0,0.15);
  }

  input[type="text"]{
    width:100%;
    max-width:420px;
    padding:12px 14px;
    border-radius:10px;
    border:none;
    outline:none;
    font-size:16px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.12), inset 0 0 18px rgba(255,255,255,0.03);
    text-align:center;
    background: rgba(255,255,255,0.02);
    color:#fff;
  }

  .row { margin-top:12px; display:flex; gap:12px; align-items:center; justify-content:flex-start; flex-wrap:wrap; }

  button.primary{
    padding:12px 18px;
    border-radius:12px;
    border:none;
    background: linear-gradient(90deg, var(--yellow), var(--accent));
    color:#1b0a00;
    font-weight:800;
    cursor:pointer;
    box-shadow: 0 10px 30px rgba(255,120,0,0.16);
  }
  button.ghost{
    padding:10px 12px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.08);
    background:transparent;
    color:#fff;
    cursor:pointer;
  }

  .link-box{
    display:none;
    margin-top:16px;
    gap:10px;
  }
  .link-box input{
    text-align:center;
    background: rgba(255,255,255,0.04);
    color:#fff;
  }

  .share-buttons{ margin-top:12px; display:flex; gap:12px; flex-wrap:wrap; }
  .share-a{
    display:inline-flex; gap:8px; align-items:center;
    padding:10px 14px; border-radius:10px; color:#fff;
    font-weight:800; text-decoration:none;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  }
  .wa{ background:#25D366 } .fb{ background:#1877F2 } .ig{ background: linear-gradient(45deg,#f58529,#dd2a7b,#8134af,#515bd4) }

  .incoming{
    margin-top:12px;
    background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    padding:12px; border-radius:10px;
    color:#fff; box-shadow: 0 6px 20px rgba(0,0,0,0.12);
  }
  .from-line{ margin-top:10px; font-weight:800; font-size:1.05rem; color:#fff; text-shadow: 0 2px 8px rgba(255,160,20,0.9); animation: pulse 1.6s infinite; }
  @keyframes pulse{ 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }

  /* responsive: stack vertically on small screens */
  @media (max-width:840px){
    .card{ flex-direction:column; gap:18px; padding:18px; }
    .left{ order:0 }
    .right{ order:1 }
    img.laxmi{ width:210px }
  }
</style>
</head>
<body>

<canvas id="c"></canvas>

<div class="card" role="main" aria-labelledby="title">
  <div class="left">
    <img src="laxmimata.gif" alt="Laxmi Mata" class="laxmi" id="laxmiImg">
  </div>

  <div class="right">
    <h1 class="big" id="title">‚ú® ‡§∂‡•Å‡§≠ ‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä ‚ú®</h1>
    <p class="lead" id="lead">‡§Ö‡§™‡§®‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ ‡§¨‡§®‡§æ‡§á‡§è ‚Äî ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§≤‡§ø‡§Ç‡§ï ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§</p>

    <div id="nameArea">
      <input id="nameInput" type="text" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§â‡§¶‡§æ: ‡§∞‡§æ‡§π‡•Å‡§≤)" autocomplete="off">
      <div class="row">
        <button class="primary" id="genBtn">Link Generate ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="ghost" id="clearBtn">Clear</button>
      </div>
    </div>

    <div class="link-box" id="linkBox" aria-hidden="true">
      <input id="generatedLink" readonly>
      <div class="row">
        <button class="ghost" id="copyBtn">Copy Link</button>
      </div>
      <div class="share-buttons">
        <a id="waShare" class="share-a wa" target="_blank" rel="noopener">üì± WhatsApp</a>
        <a id="fbShare" class="share-a fb" target="_blank" rel="noopener">üìò Facebook</a>
        <a id="igShare" class="share-a ig" target="_blank" rel="noopener">üì∏ Instagram</a>
      </div>
    </div>

    <div class="incoming" id="incoming" style="display:none;">
      <div>‡§Ü‡§™‡§ï‡•ã ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§™‡•Ç‡§∞‡•á ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã ‡§¶‡§ø‡§µ‡§æ‡§≤‡•Ä ‡§ï‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§¨‡§π‡•Å‡§§ ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Å</div>
      <div class="from-line" id="fromLine">‚Äî</div>
      <div style="margin-top:8px; font-size:0.95rem; color:rgba(255,255,255,0.9)">‡§Ü‡§™ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§§‡•ã ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§°‡§æ‡§≤‡§ï‡§∞ ‡§Ø‡§π ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ï‡§ø‡§∏‡•Ä ‡§î‡§∞ ‡§ï‡•ã ‡§≠‡•á‡§ú ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</div>
    </div>
  </div>
</div>

<script>
/* Query param key used for sender name */
const PARAM = 'from';
function getParam(){ return new URL(window.location.href).searchParams.get(PARAM); }

/* elements */
const nameInput = document.getElementById('nameInput');
const genBtn = document.getElementById('genBtn');
const clearBtn = document.getElementById('clearBtn');
const linkBox = document.getElementById('linkBox');
const genLink = document.getElementById('generatedLink');
const waShare = document.getElementById('waShare');
const fbShare = document.getElementById('fbShare');
const igShare = document.getElementById('igShare');
const copyBtn = document.getElementById('copyBtn');
const incoming = document.getElementById('incoming');
const fromLine = document.getElementById('fromLine');
const lead = document.getElementById('lead');

const incomingName = getParam();
if(incomingName){
  const dec = decodeURIComponent(incomingName);
  incoming.style.display = 'block';
  fromLine.innerText = `‡§Ø‡§π ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ ${dec} ‡§ï‡•Ä ‡§ì‡§∞ ‡§∏‡•á`;
  lead.innerText = '‡§Ü‡§™‡§ï‡•ã ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ ‡§¶‡•á‡§ñ‡§ø‡§Ø‡•á ‡§î‡§∞ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§°‡§æ‡§≤‡§ï‡§∞ ‡§Ü‡§ó‡•á ‡§≠‡•á‡§ú‡•á‡§Ç‡•§';
  nameInput.value = '';
} else {
  lead.innerText = '‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä Diwali greeting ‡§¨‡§®‡§æ‡§ï‡§∞ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§';
  nameInput.focus();
}

/* generate link */
function baseLink(name){ return `${window.location.origin}${window.location.pathname}?${PARAM}=${encodeURIComponent(name)}`; }
function updateShares(link, name){
  const text = `üéÜ ‡§∂‡•Å‡§≠ ‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä! üéÜ\n‡§Ø‡§π ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ ${name} ‡§ï‡•Ä ‡§ì‡§∞ ‡§∏‡•á‡•§\n${link}`;
  waShare.href = `https://wa.me/?text=${encodeURIComponent(text)}`;
  fbShare.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(link)}`;
  igShare.href = `https://www.instagram.com/?url=${encodeURIComponent(link)}`;
}
genBtn.addEventListener('click', ()=>{
  const n = (nameInput.value || '').trim();
  if(!n){ alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§'); nameInput.focus(); return; }
  const link = baseLink(n);
  genLink.value = link;
  linkBox.style.display = 'block';
  linkBox.setAttribute('aria-hidden','false');
  updateShares(link, n);
});

/* clear */
clearBtn.addEventListener('click', ()=>{
  nameInput.value = '';
  genLink.value = '';
  linkBox.style.display = 'none';
  linkBox.setAttribute('aria-hidden','true');
  nameInput.focus();
});

/* copy */
copyBtn.addEventListener('click', async ()=>{
  const v = genLink.value;
  if(!v) return;
  try{ await navigator.clipboard.writeText(v); copyBtn.innerText = 'Copied!'; setTimeout(()=>copyBtn.innerText='Copy Link',1400); }
  catch(e){ alert('Copy failed ‚Äî manually select and copy the link.'); }
});

/* Enter key */
nameInput.addEventListener('keydown', e=>{ if(e.key==='Enter') genBtn.click(); });

/* --------------- Fireworks (transparent background, bright sparks) --------------- */
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; });

const sparks = [];

function spawn(){
  const cx = Math.random() * (W*0.8) + W*0.1;
  const cy = Math.random() * (H*0.45) + H*0.05;
  const hue = Math.floor(Math.random()*60) + 18; // saffron-yellow hues
  const count = 18 + Math.floor(Math.random()*18);
  for(let i=0;i<count;i++){
    const angle = Math.random()*Math.PI*2;
    const speed = 1.6 + Math.random()*3.2;
    sparks.push({
      x: cx, y: cy,
      vx: Math.cos(angle)*speed,
      vy: Math.sin(angle)*speed,
      life: 40 + Math.floor(Math.random()*60),
      hue: hue + (Math.random()*40 - 20),
      size: 1 + Math.random()*2.6
    });
  }
}
/* spawn every ~900ms */
setInterval(spawn, 900);

function draw(){
  ctx.clearRect(0,0,W,H); // clear only ‚Äî DO NOT fill black
  // draw gentle ambient glow (subtle radial lights)
  // (no dark overlay so page background shows fully)
  for(let i=sparks.length-1;i>=0;i--){
    const p = sparks[i];
    p.x += p.vx; p.y += p.vy; p.vy += 0.02; p.vx *= 0.998;
    p.life--;
    const a = Math.max(0, p.life / 80);
    // bright glow circle
    const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.size*8);
    g.addColorStop(0, `hsla(${p.hue},100%,65%,${0.95*a})`);
    g.addColorStop(0.4, `hsla(${p.hue},90%,55%,${0.35*a})`);
    g.addColorStop(1, `hsla(${p.hue},90%,45%,${0})`);
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size*6, 0, Math.PI*2);
    ctx.fill();
    // core
    ctx.beginPath();
    ctx.fillStyle = `hsla(${p.hue},100%,70%,${a})`;
    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
    ctx.fill();
    // occasional tiny sparkles
    if(Math.random() < 0.04){
      ctx.fillStyle = `rgba(255,255,255,${0.9*a})`;
      ctx.fillRect(p.x + (Math.random()-0.5)*6, p.y + (Math.random()-0.5)*6, 1.2, 1.2);
    }
    if(p.life <= 0) sparks.splice(i,1);
  }
  requestAnimationFrame(draw);
}
draw();

</script>
</body>
</html>
